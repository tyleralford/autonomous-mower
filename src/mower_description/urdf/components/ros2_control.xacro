<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

  <!-- 
    ROS2 Control Component
    
    This file defines the ros2_control interfaces for the mower robot:
    - Hardware plugin configuration for Gazebo simulation
    - Control interfaces for drive wheels (velocity control)
    - Control interfaces for cutting reel (velocity control)
    - Gazebo plugin configuration
    
    This modular approach allows for easy switching between different
    hardware plugins (simulation vs real hardware) by replacing this file.
  -->

  <!-- ROS2 Control Integration -->
  <ros2_control name="GazeboSimSystem" type="system">
    <hardware>
      <plugin>gz_ros2_control/GazeboSimSystem</plugin>
    </hardware>
    
    <!-- Right Wheel Joint -->
    <joint name="right_wheel_joint">
      <command_interface name="velocity"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    
    <!-- Left Wheel Joint -->
    <joint name="left_wheel_joint">
      <command_interface name="velocity"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    
    <!-- Reel Joint -->
    <joint name="reel_joint">
      <command_interface name="velocity"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    
    <!-- Front Roller Joint (passive, state-only) -->
    <joint name="front_roller_joint">
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
  </ros2_control>

  <!-- Gazebo ros2_control Plugin -->
  <gazebo>
    <plugin name="gz_ros2_control::GazeboSimROS2ControlPlugin" filename="libgz_ros2_control-system">
      <parameters>$(find mower_control)/config/mower_controllers.yaml</parameters>
    </plugin>
  </gazebo>

</robot>
