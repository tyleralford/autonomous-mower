# EKF Global Configuration
#
# This EKF provides globally accurate, drift-corrected pose estimates.
# It fuses local EKF output, GPS position data, and GPS heading data.
#
# Output: /odometry/filtered/global in 'map' frame (set via remapping in launch)

ros__parameters:
  frequency: 50.0
  sensor_timeout: 0.3
  two_d_mode: true
  transform_time_offset: 0.0
  transform_timeout: 0.0
  print_diagnostics: true
  publish_tf: true

  # Frame settings (REP-105)
  map_frame: map
  odom_frame: odom
  base_link_frame: base_link
  world_frame: map

  # Input 1: Local EKF output (relative, smooth)
  odom0: /odometry/filtered/local
  #                x     y     z     r     p     y     vx    vy    vz    vr    vp    vy    ax    ay    az
  odom0_config:  [true, true, false, false, false, true,  true, false, false, false, false, true,  false, false, false]
  odom0_differential: false
  odom0_relative: false

  # Input 2: GPS position via navsat_transform (absolute XY)
  odom1: /odometry/gps
  #                x     y     z     r     p     y     vx    vy    vz    vr    vp    vy    ax    ay    az
  odom1_config:  [true, true, false, false, false, false, false, false, false, false, false, false, false, false, false]
  odom1_differential: false
  odom1_relative: false

  # Input 3: GPS heading as IMU orientation (absolute yaw only)
  imu0: /gps/heading
  #                x      y      z      r      p      y      vx     vy     vz     vr     vp     vy      ax     ay     az
  imu0_config:   [false, false, false, false, false, true,  false, false, false, false, false, false, false, false, false]
  imu0_differential: false
  imu0_relative: false
